<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Document</title>
</head>
<body>
<h3>학점 별로 학생 수를 입력하면 파이 차트로 비율 그리기</h3>
<hr>
A <input id="A" type="number" value="10">
B <input id="B" type="number" value="10">
C <input id="C" type="number" value="10">
<br>
D <input id="D" type="number" value="10">
F <input id="F" type="number" value="10">

<input onclick="chart()"
       type="button"
       value="차트그리기">
<br>

<canvas height="450" id="myCanvas" style="background-color: grey;" width="600">
</canvas>

<script>
    function chart() {
        let colors = ["blue", "green", "yellow", "magenta", "red"];
        let grades = ["A", "B", "C", "D", "F"];
        let p_sum = [];
        let canvas = document.getElementById("myCanvas");
        let context = canvas.getContext("2d");
        context.clearRect(0, 0, canvas.width, canvas.height);


        let A = document.getElementById("A").value;
        let B = document.getElementById("B").value;
        let C = document.getElementById("C").value;
        let D = document.getElementById("D").value;
        let F = document.getElementById("F").value;

        let sum = Number(A) + Number(B) + Number(C) + Number(D) + Number(F);
        p_sum.push(A / sum * 100);
        p_sum.push(B / sum * 100);
        p_sum.push(C / sum * 100);
        p_sum.push(D / sum * 100);
        p_sum.push(F / sum * 100);


        context.fillStyle = "blue";

        for (let j = 0; j < 5; j++) {
            context.fillText(grades[j] + " 학점" + p_sum[j] + "%: " + colors[j], 10, 20 + j * 15);
        }

        let startAngle = 0;
        let endAngle = 0;
        for (let i = 0; i < 5; i++) {
            context.beginPath();
            context.moveTo(canvas.width / 2, canvas.height / 2);
            console.log("start ", colors[i], " ", startAngle);
            endAngle = startAngle + (Math.PI * 2) / 100 * p_sum[i];
            console.log("end ", endAngle);
            context.arc(canvas.width / 2, canvas.height / 2, 200, startAngle, endAngle);
            context.closePath();
            context.fillStyle = colors[i];
            context.fill();
            startAngle = endAngle;
        }
    }
</script>
</body>
</html>